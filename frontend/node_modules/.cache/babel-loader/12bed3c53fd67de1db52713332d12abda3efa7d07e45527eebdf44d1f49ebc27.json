{"ast":null,"code":"// src/services/userService.js\nimport { auth, db } from '../Config/firebase';\nimport { doc, setDoc, getDoc, collection, query, where, getDocs, updateDoc, deleteDoc } from 'firebase/firestore';\n\n// Create a new user in Firestore\nexport const createUserProfile = async (uid, userData) => {\n  try {\n    const userRef = doc(db, \"Users\", uid);\n    console.log(\"Creating Firestore document with:\", {\n      uid,\n      userData\n    });\n    await setDoc(userRef, {\n      email: userData.email,\n      username: userData.username,\n      skills: {\n        dribbling: 0,\n        shooting: 0,\n        passing: 0,\n        defending: 0,\n        speed: 0,\n        stamina: 0\n      },\n      skillLevels: {\n        dribbling: 1,\n        shooting: 1,\n        passing: 1,\n        defending: 1,\n        speed: 1,\n        stamina: 1\n      },\n      skillThresholds: {\n        dribbling: 100,\n        shooting: 100,\n        passing: 100,\n        defending: 100,\n        speed: 100,\n        stamina: 100\n      },\n      createdAt: new Date(),\n      level: 1,\n      xp: 0,\n      xpThreshold: 100\n    });\n    console.log(\"Firestore document created successfully\");\n    return true;\n  } catch (error) {\n    console.error(\"Error creating user profile:\", error);\n    throw error;\n  }\n};\n\n// Get user profile data\nexport const getUserProfile = async uid => {\n  try {\n    const userRef = doc(db, \"Users\", uid);\n    const userDoc = await getDoc(userRef);\n    if (userDoc.exists()) {\n      return userDoc.data();\n    } else {\n      return null;\n    }\n  } catch (error) {\n    console.error(\"Error getting user profile:\", error);\n    throw error;\n  }\n};\n\n// // Update the UID of a user document\n// export const updateUserUid = async (tempUid, newUid) => {\n//   try {\n//     const userRef = doc(db, \"Users\", tempUid);\n//     const newUserRef = doc(db, \"Users\", newUid);\n//     const userDoc = await getDoc(userRef);\n\n//     if (userDoc.exists()) {\n//       // Copy the old document data to the new document\n//       await setDoc(newUserRef, userDoc.data());\n//       // Delete the old document\n//       await deleteDoc(userRef);\n//     }\n//     return true;\n//   } catch (error) {\n//     console.error(\"Error updating user UID:\", error);\n//     throw error;\n//   }\n// };\n\n// Check if username is available\nexport const isUsernameAvailable = async username => {\n  try {\n    const usersRef = collection(db, \"Users\");\n    const q = query(usersRef, where(\"username\", \"==\", username));\n    const querySnapshot = await getDocs(q);\n    return querySnapshot.empty; // Returns true if username is available\n  } catch (error) {\n    console.error(\"Error checking username availability:\", error);\n    throw error;\n  }\n};\n\n// Update user skills\nexport const updateUserSkills = async (uid, skills, skillLevels, skillThresholds) => {\n  try {\n    const userRef = doc(db, \"Users\", uid);\n    await updateDoc(userRef, {\n      skills,\n      skillLevels,\n      skillThresholds\n    });\n    return true;\n  } catch (error) {\n    console.error(\"Error updating user skills:\", error);\n    throw error;\n  }\n};\n\n// Update user XP and level\nexport const updateUserProgress = async (uid, xp, level, xpThreshold) => {\n  try {\n    const userRef = doc(db, \"Users\", uid);\n    await updateDoc(userRef, {\n      xp,\n      level,\n      xpThreshold\n    });\n    return true;\n  } catch (error) {\n    console.error(\"Error updating user progress:\", error);\n    throw error;\n  }\n};","map":{"version":3,"names":["auth","db","doc","setDoc","getDoc","collection","query","where","getDocs","updateDoc","deleteDoc","createUserProfile","uid","userData","userRef","console","log","email","username","skills","dribbling","shooting","passing","defending","speed","stamina","skillLevels","skillThresholds","createdAt","Date","level","xp","xpThreshold","error","getUserProfile","userDoc","exists","data","isUsernameAvailable","usersRef","q","querySnapshot","empty","updateUserSkills","updateUserProgress"],"sources":["C:/Users/Etienne/Documents/SOFTWARE PROJECTS/Footsies_Soccer_Trainer_App/frontend/src/Services/userService.js"],"sourcesContent":["// src/services/userService.js\r\nimport { auth, db } from '../Config/firebase';\r\nimport { \r\n  doc, \r\n  setDoc, \r\n  getDoc, \r\n  collection, \r\n  query, \r\n  where, \r\n  getDocs,\r\n  updateDoc,\r\n  deleteDoc\r\n} from 'firebase/firestore';\r\n\r\n// Create a new user in Firestore\r\nexport const createUserProfile = async (uid, userData) => {\r\n  try {\r\n    const userRef = doc(db, \"Users\", uid);\r\n    console.log(\"Creating Firestore document with:\", { uid, userData });\r\n    await setDoc(userRef, {\r\n      email: userData.email,\r\n      username: userData.username,\r\n      skills: {\r\n        dribbling: 0,\r\n        shooting: 0,\r\n        passing: 0,\r\n        defending: 0,\r\n        speed: 0,\r\n        stamina: 0\r\n      },\r\n      skillLevels: {\r\n        dribbling: 1,\r\n        shooting: 1,\r\n        passing: 1,\r\n        defending: 1,\r\n        speed: 1,\r\n        stamina: 1\r\n      },\r\n      skillThresholds: {\r\n        dribbling: 100,\r\n        shooting: 100,\r\n        passing: 100,\r\n        defending: 100,\r\n        speed: 100,\r\n        stamina: 100\r\n      },\r\n      createdAt: new Date(),\r\n      level: 1,\r\n      xp: 0,\r\n      xpThreshold: 100\r\n    });\r\n    console.log(\"Firestore document created successfully\");\r\n    return true;\r\n  } catch (error) {\r\n    console.error(\"Error creating user profile:\", error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Get user profile data\r\nexport const getUserProfile = async (uid) => {\r\n  try {\r\n    const userRef = doc(db, \"Users\", uid);\r\n    const userDoc = await getDoc(userRef);\r\n    \r\n    if (userDoc.exists()) {\r\n      return userDoc.data();\r\n    } else {\r\n      return null;\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Error getting user profile:\", error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// // Update the UID of a user document\r\n// export const updateUserUid = async (tempUid, newUid) => {\r\n//   try {\r\n//     const userRef = doc(db, \"Users\", tempUid);\r\n//     const newUserRef = doc(db, \"Users\", newUid);\r\n//     const userDoc = await getDoc(userRef);\r\n\r\n//     if (userDoc.exists()) {\r\n//       // Copy the old document data to the new document\r\n//       await setDoc(newUserRef, userDoc.data());\r\n//       // Delete the old document\r\n//       await deleteDoc(userRef);\r\n//     }\r\n//     return true;\r\n//   } catch (error) {\r\n//     console.error(\"Error updating user UID:\", error);\r\n//     throw error;\r\n//   }\r\n// };\r\n\r\n// Check if username is available\r\nexport const isUsernameAvailable = async (username) => {\r\n  try {\r\n    const usersRef = collection(db, \"Users\");\r\n    const q = query(usersRef, where(\"username\", \"==\", username));\r\n    const querySnapshot = await getDocs(q);\r\n    return querySnapshot.empty; // Returns true if username is available\r\n  } catch (error) {\r\n    console.error(\"Error checking username availability:\", error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Update user skills\r\nexport const updateUserSkills = async (uid, skills, skillLevels, skillThresholds) => {\r\n  try {\r\n    const userRef = doc(db, \"Users\", uid);\r\n    await updateDoc(userRef, { skills, skillLevels, skillThresholds });\r\n    return true;\r\n  } catch (error) {\r\n    console.error(\"Error updating user skills:\", error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Update user XP and level\r\nexport const updateUserProgress = async (uid, xp, level, xpThreshold) => {\r\n  try {\r\n    const userRef = doc(db, \"Users\", uid);\r\n    await updateDoc(userRef, { xp, level, xpThreshold });\r\n    return true;\r\n  } catch (error) {\r\n    console.error(\"Error updating user progress:\", error);\r\n    throw error;\r\n  }\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}